options(digits.secs = 6)
start_time <- Sys.time()
library(tidyverse)
library(zoo)
library(data.table)
mobility <- fread("https://www.gstatic.com/covid19/mobility/Global_Mobility_Report.csv", sep = ",")
mobility <- mobility %>%
filter(sub_region_1 == "")
print(end_time - start_time)
print(object.size(mobility)/1024)
mobility %>%
filter(country_region_code == c("DE")) %>%
mutate(roll_mean = rollmean(retail_and_recreation_percent_change_from_baseline, 7, fill = NA)) %>%
# tail()
ggplot(aes(x = date, y = roll_mean, color = country_region_code)) +
geom_line(size = 1.5) +
scale_x_date(breaks = '5 weeks')
mobility %>%
filter(country_region_code == "BR" & sub_region_1 == "") -> mobility_br
mobility_br %>%
mutate(roll_mean = rollmean(retail_and_recreation_percent_change_from_baseline, 30, fill = NA)) %>%
ggplot(aes(x = date, y = roll_mean)) +
geom_line()
end_time <- Sys.time()
print(start_time - end_time)
mobility_br %>%
mutate(roll_mean = rollmean(retail_and_recreation_percent_change_from_baseline, 30, fill = NA)) %>%
ggplot(aes(x = date, y = roll_mean)) +
geom_line()
mobility %>%
filter(country_region_code == "PT" & sub_region_1 == "") -> mobility_pt
mobility_br %>%
mutate(roll_mean = rollmean(retail_and_recreation_percent_change_from_baseline, 30, fill = NA)) %>%
ggplot(aes(x = date, y = roll_mean)) +
geom_line()
mobility_pt %>%
mutate(roll_mean = rollmean(retail_and_recreation_percent_change_from_baseline, 30, fill = NA)) %>%
ggplot(aes(x = date, y = roll_mean)) +
geom_line()
names(mobility)
